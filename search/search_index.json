{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Naay","text":"<p>Naay \u2014 \"Naay ain't all yaml\" \u2014 The intent of this project is to define a tiny strict YAML subset where all values are strings, plus support for <code>|</code> block literals, anchors, merges, and YAML-compatible single-line comments \u2014 implemented with a Rust core and a Python binding. This documentation site is built with MkDocs + Material and uses mkdocstrings to render API docs from the Python package.</p> <ul> <li>Repository: https://github.com/rbroderi/naay</li> <li>Python package (for API docs): naay</li> </ul> <p>See the API docs for auto-generated Python docstrings.</p>"},{"location":"api/","title":"API Reference","text":"<p>The Python package exposes a very small surface area that mirrors the Rust core. Install it in editable mode so mkdocstrings can import the latest sources:</p> <pre><code>uv pip install -e .\n</code></pre>"},{"location":"api/#python-module-naay","title":"Python Module: <code>naay</code>","text":"<pre><code>from __future__ import annotations\n\nfrom typing import Final\n\nREQUIRED_VERSION: Final = \"1.0\"\nUSING_PURE_PYTHON: bool\ntype YamlValue = str | list[\"YamlValue\"] | dict[str, \"YamlValue\"]\n\ndef loads(text: str, /) -&gt; YamlValue:\n    \"\"\"Parse naay YAML into nested dict/list/string structures.\"\"\"\n\ndef dumps(data: YamlValue, /) -&gt; str:\n    \"\"\"Serialize a naay-compatible tree back to YAML text.\"\"\"\n</code></pre> <ul> <li><code>REQUIRED_VERSION</code> is the string that every document must declare in <code>_naay_version</code>.</li> <li><code>USING_PURE_PYTHON</code> is <code>True</code> when the fallback parser is active (native module missing).</li> <li><code>loads</code>/<code>dumps</code> delegate to the native Rust extension when available; otherwise they use the pure-Python implementation located in <code>src/_naay_pure/parser.py</code>.</li> </ul>"},{"location":"api/#rust-core-highlights","title":"Rust Core Highlights","text":"<p>The Rust crate <code>naay-core</code> underpins both the native extension and the documentation\u2019s feature set:</p> <ul> <li><code>YamlValue</code> enum captures the three node kinds (<code>Str</code>, <code>Seq</code>, <code>Map</code>).</li> <li><code>YamlNode</code> wraps each value with comment metadata so the dumper can round-trip formatting.</li> <li><code>parse_naay(&amp;str) -&gt; Result&lt;YamlValue, ParseError&gt;</code> enforces <code>_naay_version</code> and whitespace rules.</li> <li><code>dump_naay(&amp;YamlValue) -&gt; Result&lt;String, DumpError&gt;</code> emits deterministic YAML, using <code>[]</code>/<code>{}</code> for empty collections.</li> </ul> <p>When contributing Rust examples to the docs, prefer importing from <code>naay-core</code> and referencing the same <code>REQUIRED_VERSION</code> constant to keep parity with the Python API.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#from-pypi","title":"From PyPI","text":"<pre><code>pip install naay\n</code></pre> <p>This installs the published wheel or source distribution built by our release workflow. A Rust compiler is not required unless pip falls back to building from source on an unsupported platform.</p>"},{"location":"installation/#from-source","title":"From Source","text":"<p>Clone the repository and install the Python package plus its dependencies using <code>uv</code> or <code>pip</code>:</p> <pre><code>git clone https://github.com/rbroderi/naay.git\ncd naay\nuv pip install -e .[dev]\n</code></pre> <p>The editable install gives you access to the CLI utilities, the pure-Python fallback module, and the Rust-backed extension compiled via <code>maturin</code>.</p>"},{"location":"installation/#building-wheels-manually","title":"Building Wheels Manually","text":"<p>If you need to produce wheels by hand (e.g., for offline distribution), install <code>maturin</code> and run:</p> <pre><code>uv tool install maturin\nmaturin build --release\n</code></pre> <p>The artifacts will be placed in the <code>target/wheels/</code> directory. You can then install them with <code>pip install target/wheels/&lt;wheel&gt;.whl</code>.</p>"},{"location":"usage/","title":"Usage","text":"<p>This page mirrors the most common tasks highlighted in the README, focusing on the <code>naay</code> API.</p>"},{"location":"usage/#install","title":"Install","text":"<pre><code>uv pip install naay\n</code></pre> <p>For local development inside the repo:</p> <pre><code>uv pip install -e .\n</code></pre>"},{"location":"usage/#load-dump-yaml","title":"Load &amp; Dump YAML","text":"<pre><code>import naay\nfrom pathlib import Path\n\ntext = Path(\"examples/campaign.yaml\").read_text(encoding=\"utf-8\")\ndata = naay.loads(text)\nprint(\"Loaded data:\", data)\n\nout = naay.dumps(data)\nprint(\"Round-tripped YAML:\")\nprint(out)\n</code></pre>"},{"location":"usage/#cli-utilities","title":"CLI Utilities","text":""},{"location":"usage/#validate-round-trip","title":"Validate / Round-Trip","text":"<pre><code>uv run python - &lt;&lt;'PY'\nimport pathlib\nimport naay\n\ntext = pathlib.Path(\"examples/stress_test0.yaml\").read_text(encoding=\"utf-8\")\ndata = naay.loads(text)\npath = pathlib.Path(\"/tmp/roundtrip.yaml\")\npath.write_text(naay.dumps(data), encoding=\"utf-8\")\nprint(\"Wrote\", path)\nPY\n</code></pre>"},{"location":"usage/#benchmark-vs-pyyaml-ruamelyaml","title":"Benchmark vs PyYAML / ruamel.yaml","text":"<pre><code>uv run python examples/demo.py\n</code></pre> <p>This script repeatedly loads and dumps <code>examples/stress_test0.yaml</code> and <code>examples/stress_test1.yaml</code>, printing average timings similar to those shown in the README benchmark tables.</p>"}]}